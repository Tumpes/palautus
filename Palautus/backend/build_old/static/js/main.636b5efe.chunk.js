(this["webpackJsonp2.11"]=this["webpackJsonp2.11"]||[]).push([[0],{22:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t.n(c),a=t(17),i=t.n(a),u=(t(22),t(7)),r=t(3),s=t(4),l=t.n(s),d="/api/persons",j=function(){return l.a.get(d)},b=function(e){return l.a.post(d,e)},f=function(e,n){return l.a.put("".concat(d,"/").concat(e),n)},m=function(e){return l.a.delete("".concat(d,"/").concat(e))},h=t(0),O=function(e){var n=e.message,t=e.type;return console.log(n,t),"undefined"===n||null===n?null:"error"===t?Object(h.jsx)("div",{className:"error",children:n}):Object(h.jsx)("div",{className:"success",children:n})},g=function(e){return Object(h.jsxs)("p",{children:["Filter: ",Object(h.jsx)("input",{onChange:e.handleFilterChange})]})},v=function(e){return Object(h.jsxs)("li",{children:[e.name.name+" "+e.name.number,Object(h.jsx)("button",{onClick:function(){return n=e.id,window.confirm("delete ".concat(e.name.name,"?"))&&m(n+1).then((function(e){return console.log(e)})),e.setNotification("henkil\xf6 ".concat(e.name.name," poistettu.")),e.setNotificationType("success"),void setTimeout((function(){e.setNotification(null)}),5e3);var n},children:" delete "})]})},N=function(e){var n=e.addName,t=e.newName,c=e.handleNameChange,o=e.newNumber,a=e.handleNumberChange;return Object(h.jsxs)("form",{onSubmit:n,children:[Object(h.jsxs)("div",{children:["Name: ",Object(h.jsx)("input",{value:t,onChange:c})]}),Object(h.jsxs)("div",{children:["Number:",Object(h.jsx)("input",{value:o,onChange:a})]}),Object(h.jsx)("button",{type:"submit",children:"save"})]})},p=function(e){return void 0===e.filteredNames?null:Object(h.jsx)("ul",{children:e.filteredNames.map((function(n,t){return Object(h.jsx)(e.Nimi,{name:n,id:t,setNotification:e.setNotification,setNotificationType:e.setNotificationType},n.name)}))})},x=function(){var e=Object(c.useState)([]),n=Object(r.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)(""),i=Object(r.a)(a,2),s=i[0],l=i[1],d=Object(c.useState)(""),m=Object(r.a)(d,2),x=m[0],w=m[1],C=Object(c.useState)(t),y=Object(r.a)(C,2),k=y[0],T=y[1],S=Object(c.useState)(null),F=Object(r.a)(S,2),L=F[0],P=F[1],B=Object(c.useState)(""),D=Object(r.a)(B,2),E=D[0],I=D[1];Object(c.useEffect)((function(){j().then((function(e){T(e.data),o(e.data)}))}),[]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(O,{message:L,type:E}),Object(h.jsx)(g,{handleFilterChange:function(e){var n=e.target.value;console.log(n),null===n||""===n?T(t):(T(t.filter((function(e){return e.name.toLowerCase().includes(n)}))),console.log(k))}}),Object(h.jsx)("h1",{children:" add new person "}),Object(h.jsx)(N,{addName:function(e){if(e.preventDefault(),0!==t.filter((function(e){return e.name===s})).length){if(window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))){console.log(t);var n=Object(u.a)({},t[Object.keys(t).find((function(e){return t[e].name===s}))]);console.log(n.id);var c=Object(u.a)(Object(u.a)({},n),{},{number:x});f(n.id,c).then((function(e){console.log(e.data.number),w(e.data.number),P("henkil\xf6n ".concat(s," numero vaihdettu numeroon ").concat(x)),I("success"),setTimeout((function(){P(null)}),5e3)})).catch((function(e){P("".concat(n.name," has been removed from the server.")),I("error"),setTimeout((function(){P(null)}),5e3)}))}}else{var a={name:s,number:x,key:s,id:t.length+1};console.log(t.concat(a)),b(a).then((function(e){o(t.concat(e.data)),T(k.concat(e.data)),l(""),P("henkil\xf6 ".concat(s," lis\xe4tty.")),I("success"),setTimeout((function(){P(null)}),5e3)}))}},newName:s,handleNameChange:function(e){console.log(e.target.value),l(e.target.value)},newNumber:x,handleNumberChange:function(e){console.log(e.target.value),w(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(p,{filteredNames:k,Nimi:v,setNotification:P,setNotificationType:I})]})},w=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,43)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),c(e),o(e),a(e),i(e)}))};i.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(x,{})}),document.getElementById("root")),w()}},[[42,1,2]]]);
//# sourceMappingURL=main.636b5efe.chunk.js.map